<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FEDUS | Exclusive Dashboard</title>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
:root {
    --fedus-orange:#f39c12;
    --accent-blue:#3498db;
    --light-blue:#eaf2f8;
    --green:#27ae60;
    --red:#e74c3c;
    --card-shadow:0 4px 15px rgba(0,0,0,.08);
}

body {
    font-family:Segoe UI,Tahoma,Verdana,sans-serif;
    background:var(--light-blue);
    margin:0;
}

.header {
    background:linear-gradient(90deg,#f39c12,#e67e22);
    padding:15px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    color:white;
}

.container { padding:25px }

.toolbar {
    background:white;
    padding:25px;
    border-radius:12px;
    box-shadow:var(--card-shadow);
    display:flex;
    gap:15px;
    margin-bottom:25px;
}

input {
    padding:14px;
    border-radius:8px;
    border:1px solid #ddd;
}

button {
    padding:0 25px;
    border:none;
    border-radius:8px;
    color:white;
    font-weight:bold;
    cursor:pointer;
}

.refresh-btn { background:var(--accent-blue) }
.reset-btn { background:#95a5a6 }

.metrics-grid {
    display:grid;
    grid-template-columns:320px 1fr 1fr 1fr;
    gap:25px;
    margin-bottom:25px;
}

.metric-card {
    background:white;
    padding:30px;
    border-radius:15px;
    border-top:6px solid var(--fedus-orange);
    box-shadow:var(--card-shadow);
    text-align:center;
}

.metric-card h2 {
    font-size:56px;
    margin:0;
    color:var(--accent-blue);
}

.metric-card p {
    margin-top:10px;
    font-weight:bold;
    color:#777;
}

.analysis-card {
    background:white;
    padding:25px;
    border-radius:15px;
    box-shadow:var(--card-shadow);
    border-top:6px solid var(--accent-blue);
}

.analysis-card h3 {
    font-size:14px;
    text-transform:uppercase;
    color:var(--fedus-orange);
    margin-bottom:15px;
}

.trend-value {
    font-size:32px;
    font-weight:bold;
}

.up { color:var(--green) }
.down { color:var(--red) }

.sparkline {
    display:flex;
    gap:4px;
    height:40px;
    margin-top:15px;
    align-items:flex-end;
}

.sparkline div {
    width:6px;
    background:var(--accent-blue);
    border-radius:3px;
}

.platform-wow {
    display:flex;
    flex-direction:column;
    gap:10px;
}

.platform-row {
    display:flex;
    justify-content:space-between;
    font-weight:bold;
}

table {
    width:100%;
    border-collapse:collapse;
    background:white;
    box-shadow:var(--card-shadow);
}

th,td {
    padding:14px;
    border-bottom:1px solid #eee;
    font-size:13px;
}

th {
    background:white;
    border-bottom:4px solid var(--fedus-orange);
    text-transform:uppercase;
    font-size:11px;
}
</style>
</head>

<body>

<div class="header">
<img src="https://raw.githubusercontent.com/sachinfedus-lang/2026-data/main/logo.png" height="45">
<div style="font-size:22px;font-weight:bold;">EXCLUSIVE DASHBOARD</div>
</div>

<div class="container">

<div class="toolbar">
<input id="searchInput" placeholder="Search..." onkeyup="processData()">
<input id="datePicker">
<button class="refresh-btn" onclick="loadData()">REFRESH</button>
<button class="reset-btn" onclick="clearFilters()">RESET</button>
</div>

<div class="metrics-grid">

<div class="metric-card">
<h2 id="totalEntries">0</h2>
<p>TOTAL ENTRIES</p>
</div>

<div class="analysis-card">
<h3>Orders Trend (Last 7 Days)</h3>
<div id="overallTrend" class="trend-value">0%</div>
<div id="sparkline" class="sparkline"></div>
</div>

<div class="analysis-card">
<h3>Platform WoW</h3>
<div class="platform-wow">
<div class="platform-row">
<span>Amazon</span>
<span id="amazonTrend">0%</span>
</div>
<div class="platform-row">
<span>Blinkit</span>
<span id="blinkitTrend">0%</span>
</div>
</div>
</div>

<div class="analysis-card">
<h3>Top 5 Regions</h3>
<div id="regionList"></div>
</div>

</div>

<table>
<thead>
<tr>
<th>Date</th>
<th>Product</th>
<th>Customer</th>
<th>Platform</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>

</div>

<script>
const csvUrl='https://docs.google.com/spreadsheets/d/e/2PACX-1vTo_H6uUDOXjAILtefs-VU0oG-OxyLGMkxxBTgvkVjL-xtkOXKDpzewRtLQxTYg-2HfNoO6C3TuQa-H/pub?output=csv';
let rawData=[];

flatpickr("#datePicker",{mode:"range",onClose:processData});

async function loadData(){
const res=await fetch(csvUrl+'&cb='+Date.now());
const text=await res.text();
rawData=text.split('\n').slice(1).map(r=>{
const c=r.split(',');
return{
dt:new Date((c[3]||'').split('/').reverse().join('-')),
platform:(c[9]||'').trim(),
product:(c[15]||'').trim(),
customer:(c[5]||'').trim(),
blob:r.toLowerCase()
};
});
processData();
}

function processData(){
let data=[...rawData];
const s=document.getElementById('searchInput').value.toLowerCase();
if(s) data=data.filter(r=>r.blob.includes(s));
render(data);
}

function calcTrend(data,platform){
const now=new Date();
const last7=data.filter(r=>(!platform||r.platform===platform)&&now-r.dt<=7*864e5);
const prev7=data.filter(r=>(!platform||r.platform===platform)&&now-r.dt>7*864e5&&now-r.dt<=14*864e5);
return prev7.length?((last7.length-prev7.length)/prev7.length*100):0;
}

function render(data){
document.getElementById('totalEntries').innerText=data.length;

const overall=calcTrend(data);
const ot=document.getElementById('overallTrend');
ot.innerText=`${overall.toFixed(1)}% ${overall>=0?'↑':'↓'}`;
ot.className='trend-value '+(overall>=0?'up':'down');

const spark=document.getElementById('sparkline');
spark.innerHTML='';
for(let i=6;i>=0;i--){
const c=data.filter(r=>{
const d=new Date();
return d-r.dt>=i*864e5&&d-r.dt<(i+1)*864e5;
}).length;
const bar=document.createElement('div');
bar.style.height=(c*6+6)+'px';
spark.appendChild(bar);
}

const am=calcTrend(data,'Amazon');
const bl=calcTrend(data,'Blinkit');

const a=document.getElementById('amazonTrend');
a.innerText=`${am.toFixed(1)}% ${am>=0?'↑':'↓'}`;
a.className=am>=0?'up':'down';

const b=document.getElementById('blinkitTrend');
b.innerText=`${bl.toFixed(1)}% ${bl>=0?'↑':'↓'}`;
b.className=bl>=0?'up':'down';

document.getElementById('tableBody').innerHTML=data.map(r=>`
<tr>
<td>${r.dt.toLocaleDateString()}</td>
<td>${r.product}</td>
<td>${r.customer}</td>
<td>${r.platform}</td>
</tr>`).join('');
}

function clearFilters(){
document.getElementById('searchInput').value='';
processData();
}

window.onload=loadData;
</script>

</body>
</html>

